{% comment %}
  Elite Pro Framework
  Featured Collection Section with Luxury Onboarding
{% endcomment %}

<section class="featured-collection-section reveal" data-section-id="{{ section.id }}">
  <div class="container">
    
    {% if section.settings.title != blank %}
      <div class="section-header text-center">
        <h2 class="gold-text">{{ section.settings.title | uppercase }}</h2>
        <div class="luxury-line"></div>
      </div>
    {% endif %}

    <div class="elite-grid">
      {%- assign collection = collections[section.settings.collection] -%}
      {%- assign product_limit = section.settings.limit -%}

      {% if collection != blank and collection.products_count > 0 %}
        {% comment %} --- Rendering Real Products --- {% endcomment %}
        {% for product in collection.products limit: product_limit %}
          {% render 'product-card', product: product %}
        {% endfor %}
      {% else %}
        {% comment %} --- Onboarding Mode: Shows placeholder if no collection is selected --- {% endcomment %}
        {% for i in (1..product_limit) %}
          <div class="product-card glass-panel" style="opacity: 0.6;">
            <div class="product-card-image" style="background: #111; aspect-ratio: 3/4; display: flex; align-items: center; justify-content: center;">
              {{ 'product-' | append: i | placeholder_svg_tag: 'placeholder-svg-filled' }}
            </div>
            <div class="product-card-info" style="padding: 20px; text-align: center;">
              <h3 class="product-card-title" style="font-size: 0.9rem; letter-spacing: 1px;">PREMIUM PRODUCT {{ i }}</h3>
              <p class="product-card-price" style="color: var(--elite-gold-primary); font-weight: bold;">$199.00</p>
            </div>
          </div>
        {% endfor %}
      {% endif %}
    </div>

    {% if section.settings.show_view_all and collection.products_count > product_limit %}
      <div class="view-all-wrapper text-center" style="margin-top: 50px;">
        <a href="{{ collection.url }}" class="btn-elite">VIEW ALL PIECES</a>
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Featured Collection",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Heading",
      "default": "New Arrivals"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Select Collection"
    },
    {
      "type": "range",
      "id": "limit",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "Products to Show",
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show 'View All' Button",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Featured Collection",
      "category": "Collection"
    }
  ]
}
{% endschema %}
