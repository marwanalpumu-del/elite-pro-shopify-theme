<!doctype html>
<html lang="{{ request.locale.iso_code }}" dir="{% if request.locale.iso_code == 'ar' %}rtl{% else %}ltr{% endif %}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="canonical" href="{{ canonical_url }}">

  <title>
    {{ page_title }}{% if current_tags %} &ndash; tagged "{{ current_tags | join: ', ' }}"{% endif %}{% if current_page != 1 %} &ndash; Page {{ current_page }}{% endif %}{% unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless %}
  </title>

  {% if page_description %}
    <meta name="description" content="{{ page_description | escape }}">
  {% endif %}

  {{ content_for_header }}

  {%- liquid
    # --- ELITE PRO NICHE ENGINE ---
    # Logic to switch design language based on the selected niche
    assign niche = settings.theme_style | default: 'fragrance'
    
    case niche
      when 'fragrance'
        assign primary_accent = '#D4AF37'
        assign font_family = "'Playfair Display', serif"
        assign font_url = "https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
      when 'watch'
        assign primary_accent = '#E5E5E5'
        assign font_family = "'Inter', sans-serif"
        assign font_url = "https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      else
        assign primary_accent = '#D4AF37'
        assign font_family = "'Playfair Display', serif"
        assign font_url = "https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
    endcase
  -%}

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="{{ font_url }}" rel="stylesheet">

  <style>
    :root {
      /* Luxury Branding Colors */
      --elite-gold-primary: {{ settings.gold_primary | default: primary_accent }};
      --elite-gold-light: {{ settings.gold_light | default: '#F9E2AF' }};
      --elite-black-deep: {{ settings.bg_color | default: '#0A0A0A' }};
      
      /* Typography Variables */
      --main-font: {{ font_family }};
      
      /* Visual FX */
      --glass-bg: rgba(255, 255, 255, 0.05);
      --glass-border: rgba(255, 255, 255, 0.1);
      --transition-main: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }

    body {
      background-color: var(--elite-black-deep);
      color: #ffffff;
      font-family: var(--main-font);
      margin: 0;
      -webkit-font-smoothing: antialiased;
      overflow-x: hidden;
    }
  </style>

  {{ 'base.css' | asset_url | stylesheet_tag }}
  {{ 'elite-pro.css' | asset_url | stylesheet_tag }}
</head>

<body class="template-{{ template.name | handle }} niche-{{ settings.theme_style | default: 'fragrance' }}">

  <a class="skip-to-content-link visually-hidden" href="#MainContent">Skip to content</a>

  {% section 'header' %}

  <main id="MainContent" class="content-for-layout focus-none" role="main" tabindex="-1">
    {{ content_for_layout }}
  </main>

  {% section 'elite-footer' %}

  <script src="{{ 'elite-pro.js' | asset_url }}" defer></script>

</body>
</html>
